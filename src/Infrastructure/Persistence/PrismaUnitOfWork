import { PrismaClient } from '@prisma/client';

export class PrismaUnitOfWork {
  constructor(private prisma: PrismaClient) {}

  // fournit un runner qui ex√©cute une fonction dans une transaction
  async runInTransaction<T>(fn: (tx: PrismaClient) => Promise<T>): Promise<T> {
    return this.prisma.$transaction(async (tx) => {
      return fn(tx as unknown as PrismaClient);
    });
  }
}
